<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–û—Ç—á—ë—Ç CORS-—Å–∫–∞–Ω–µ—Ä–∞</title>
    <style>
        body { font-family: Arial, sans-serif; background: #f4f4f4; padding: 20px; max-width: 1200px; margin: 0 auto; }
        h1, h2 { color: #333; }
        .score { font-size: 24px; font-weight: bold; padding: 10px; border-radius: 5px; text-align: center; }
        .score-high { background: #d4edda; color: #155724; }
        .score-medium { background: #fff3cd; color: #856404; }
        .score-low { background: #f8d7da; color: #721c24; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; background: white; }
        th, td { border: 1px solid #ccc; padding: 12px; text-align: left; }
        th { background: #e9ecef; }
        .missing { color: #dc3545; font-weight: bold; }
        .ok { color: #28a745; font-weight: bold; }
        .warning { color: #ffc107; font-weight: bold; }
        .header-value { font-family: monospace; font-size: 12px; background: #f8f9fa; padding: 2px 4px; border-radius: 3px; }
        .error { background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px; }
        .back-link { display: inline-block; margin-top: 20px; padding: 10px 15px; background: #007bff; color: white; text-decoration: none; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>üîê –û—Ç—á—ë—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤</h1>

    {% if error %}
    <div class="error">
        <h2>‚ùå –û—à–∏–±–∫–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
        <p><strong>–¶–µ–ª—å:</strong> {{ target }}</p>
        <p><strong>–î–∞—Ç–∞:</strong> {{ date }}</p>
        <ul>
            {% for issue in issues %}
            <li>{{ issue }}</li>
            {% endfor %}
        </ul>
    </div>
    {% else %}
    <div class="score score-{{ 'high' if security_score >= 80 else 'medium' if security_score >= 60 else 'low' }}">
        –û—Ü–µ–Ω–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏: {{ security_score }}%
    </div>

    <p><strong>üîó –¶–µ–ª—å:</strong> {{ target }}</p>
    <p><strong>üìÖ –î–∞—Ç–∞:</strong> {{ date }}</p>
    <p><strong>üìä –ó–∞–≥–æ–ª–æ–≤–∫–æ–≤ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ:</strong> {{ total_headers }}</p>

    <h2>üõ°Ô∏è –ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</h2>
    <table>
        <tr>
            <th>–ó–∞–≥–æ–ª–æ–≤–æ–∫</th>
            <th>–°—Ç–∞—Ç—É—Å</th>
            <th>–ó–Ω–∞—á–µ–Ω–∏–µ</th>
            <th>–†–∏—Å–∫</th>
        </tr>
        {% for header in headers %}
        <tr>
            <td><strong>{{ header.name }}</strong></td>
            <td class="{{ 'ok' if header.present else 'missing' }}">
                {% if header.present %}‚úÖ –ü—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç{% else %}‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç{% endif %}
            </td>
            <td>
                {% if header.present %}
                <code class="header-value">{{ header.value|truncate(50) }}</code>
                {% else %}
                ‚Äî
                {% endif %}
            </td>
            <td>{{ header.risk }}</td>
        </tr>
        {% endfor %}
    </table>

    <h2>‚ö†Ô∏è –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã</h2>
    {% if issues %}
    <ul>
        {% for issue in issues %}
        <li class="{{ 'warning' if '‚ö†Ô∏è' in issue else '' }}">{{ issue }}</li>
        {% endfor %}
    </ul>
    {% else %}
    <p>‚úÖ –ü—Ä–æ–±–ª–µ–º –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ! –û—Ç–ª–∏—á–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å!</p>
    {% endif %}
    {% endif %}

    <a href="/" class="back-link">‚Üê –ù–æ–≤–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</a>
</body>
</html>